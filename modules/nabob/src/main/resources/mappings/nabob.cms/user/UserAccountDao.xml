<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nabobsite.modules.nabob.cms.user.dao.UserAccountDao">

	<!-- 查询数据
	<select id="findList" resultType="UserAccount">
		SELECT ${sqlMap.column.toSql()}
		FROM ${sqlMap.table.toSql()}
		<where>
			${sqlMap.where.toSql()}
		</where>
		ORDER BY ${sqlMap.order.toSql()}
	</select> -->

	<!--增加-->
	<update id="updateAccountTotalMoney" parameterType="com.nabobsite.modules.nabob.cms.user.entity.UserAccount">
		update
		    t1_user_account
		<set>
			<if test="totalMoney != null ">
				total_money = total_money + #{totalMoney},
			</if>
			<if test="remarks != null and remarks !='' ">
				remarks = #{remarks},
			</if>
			updated = sysdate()
		</set>
		<where>
			id = #{id} and  (total_money + #{totalMoney}) >= 0
		</where>
	</update>

	<!--增加-->
	<update id="updateAccountTaskMoney" parameterType="com.nabobsite.modules.nabob.cms.user.entity.UserAccount">
		update
			t1_user_account
		<set>
			<if test="taskMoney != null ">
				task_money = task_money + #{taskMoney},
			</if>
			<if test="remarks != null and remarks !='' ">
				remarks = #{remarks},
			</if>
			updated = sysdate()
		</set>
		<where>
			id = #{id} and  (task_money + #{taskMoney}) >= 0
		</where>
	</update>

	<!--增加-->
	<update id="updateCommissionMoney" parameterType="com.nabobsite.modules.nabob.cms.user.entity.UserAccount">
		update
		t1_user_account
		<set>
			<if test="commissionMoney != null ">
				commission_money = commission_money + #{commissionMoney},
			</if>
			<if test="incrementMoney != null ">
				increment_money = increment_money + #{incrementMoney},
			</if>
			<if test="remarks != null and remarks !='' ">
				remarks = #{remarks},
			</if>
			updated = sysdate()
		</set>
		<where>
			id = #{id} and  (commission_money + #{commissionMoney}) >= 0
		</where>
	</update>

</mapper>
